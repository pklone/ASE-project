tosca_definitions_version: micro_tosca_yaml_1.1
description: microservicesArchitecture
imports:
- micro: https://di-unipi-socc.github.io/microTOSCA/1.1/microTOSCA.yaml
topology_template:
  node_templates:
    PlayerService:
      type: micro.nodes.Service
      requirements:
      - interaction: PlayerDB
      - interaction:
          node: CurrencyService
          relationship: c
      - interaction:
          node: MarketService
          relationship: c
    PlayerDB:
      type: micro.nodes.Datastore
    AdminDB:
      type: micro.nodes.Datastore
    CurrencyService:
      type: micro.nodes.Service
    AccountService:
      type: micro.nodes.Service
      requirements:
      - interaction:
          node: PlayerService
          relationship: c
      - interaction: PlayerGachaDB
      - interaction:
          node: CollectionService
          relationship: c
      - interaction:
          node: TransactionService
          relationship: c
    TransactionService:
      type: micro.nodes.Service
      requirements:
      - interaction: TransactionDB
    PaymentService:
      type: micro.nodes.Service
      requirements:
      - interaction:
          node: TransactionService
          relationship: c
    MarketService:
      type: micro.nodes.Service
      requirements:
      - interaction:
          node: PaymentService
          relationship: c
      - interaction: AuctionDB
      - interaction:
          node: CollectionService
          relationship: c
    CollectionService:
      type: micro.nodes.Service
      requirements:
      - interaction: GachaDB
    AuctionDB:
      type: micro.nodes.Datastore
    GachaDB:
      type: micro.nodes.Datastore
    PlayerGachaDB:
      type: micro.nodes.Datastore
    TransactionDB:
      type: micro.nodes.Datastore
    AuthenticationService:
      type: micro.nodes.Service
      requirements:
      - interaction: AdminDB
      - interaction:
          node: PlayerService
          relationship: c
    APIGateway:
      type: micro.nodes.MessageRouter
      requirements:
      - interaction: CollectionService
      - interaction: AccountService
      - interaction: AuthenticationService
      - interaction: MarketService
      - interaction: CurrencyService
  groups:
    adad:
      type: micro.groups.Edge
      members:
      - APIGateway
  relationship_templates:
    t:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
    c:
      type: micro.relationships.InteractsWith
      properties:
        circuit_breaker: true
    d:
      type: micro.relationships.InteractsWith
      properties:
        dynamic_discovery: true
    tc:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
        circuit_breaker: true
    td:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
        dynamic_discovery: true
    cd:
      type: micro.relationships.InteractsWith
      properties:
        circuit_breaker: true
        dynamic_discovery: true
    tcd:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
        circuit_breaker: true
        dynamic_discovery: true
