openapi: 3.0.0
info:
 title: EzGacha
 version: 1.0.0
 description: API to manage accounts, collections, currencies, and market functionalities for a players and admins

servers:
 - url: https://ase.localhost

tags:
 - name: Admin
   description: Operations related to admin functionality
 - name: Account
   description: Operations related to user accounts
 - name: Collection
   description: Operations related to gacha collections
 - name: Currency
   description: Operations related to in-game currency
 - name: Market
   description: Operations related to the auction market

paths:
 /user:
   post:
     summary: Register game account
     operationId: create_account
     tags:
       - Account
     requestBody:
       description: Account details for creation 
       content:
         application/json:
           schema:
             type: object
             properties:
               username:
                 type: string
               password:
                 type: string
               password_verify:
                 type: string
     responses:
       '201':
         description: Created 
         content:
            application/json:
              schema:
               type: object
               properties:
                response:
                  type: array
                  items:
                   $ref: '#/components/schemas/UserProfile'
       '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "Missing Data"
   delete:
     summary: Delete a game account
     operationId: delete_account
     tags:
       - Account
     responses:
       '200':
          description: Account delated
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "Your account has been succesfully eliminated"
       '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                not_logged:
                  value:
                    response: "You are not logged"
       '403':
         description: Forbidden
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               invalid_token:
                 value:
                   response: "Invalid Token"
               expired_token:
                 value:
                   response: "Expired Token"
   put:
     summary: Modify your game account
     tags:
       - Account
     requestBody:
       description: Account details for creation 
       content:
         application/json:
           schema:
             type: object
             properties:
               new_username:
                 type: string
               old_password:
                 type: string
               new_password:
                 type: string
               new_password_verify:
                 type: string
     responses:
       '200':
          description: Account modification
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "Your account has been succesfully modified"
       '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                not_logged:
                  value:
                    response: "You are not logged"
       '403':
         description: Forbidden
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               invalid_token:
                 value:
                   response: "Invalid Token"
               expired_token:
                 value:
                   response: "Expired Token"

 /login:
   post:
     summary: Login to the game system
     operationId: login
     tags:
       - Account
     requestBody:
       description: Login credentials
       content:
         application/json:
           schema:
             type: object
             properties:
               username:
                 type: string
               password:
                 type: string
     responses:
       '200':
         description: Login Successful
         content:
            application/json:
              schema:
               type: object
               properties:
                response:
                   $ref: '#/components/schemas/TokenResponse'
       '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "Missing Credentials"
       '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                already_logged_in:
                  value:
                    response: "Already logged in"
                invalid_credentials:
                  value:
                    response: "Invalid credentials"
 /logout:
   delete:
     summary: Logout from the system
     operationId: logout
     tags:
       - Account
     responses:
       '200':
          description: Logout Successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "Logout Successful"
       '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                already_logged_out:
                  value:
                    response: "Already logged out"
                not_logged:
                  value:
                    response: "You are not logged"

 /user/collection:
   get:
     summary: Get your gacha collection
     operationId: collection
     tags:
       - Account
     responses:
       '200':
         description: Success 
         content:
            application/json:
              schema:
               type: object
               properties:
                response:
                  type: array
                  items:
                   $ref: '#/components/schemas/Gacha'
       '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                not_logged:
                  value:
                    response: "You are not logged"
       '403':
         description: Forbidden
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               invalid_token:
                 value:
                   response: "Invalid Token"
               expired_token:
                 value:
                   response: "Expired Token"
 /user/currency:
   get:
     summary: Display the Currency that you have
     operationId: currency
     tags:
       - Account
     responses:
       '200':
         description: Currency available
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: number
       '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                not_logged:
                  value:
                    response: "You are not logged"
       '403':
         description: Forbidden
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               invalid_token:
                 value:
                   response: "Invalid Token"
               expired_token:
                 value:
                   response: "Expired Token"

 /user/transactions:
  get:
    summary: Display all the transaction made by the user (incoming and outgoing)
    operationId: transaction_all
    tags:
      - Account
    responses:
      '200':
         description: Success 
         content:
            application/json:
              schema:
               type: object
               properties:
                response:
                  type: array
                  items:
                   $ref: '#/components/schemas/Transaction'
      '401':
        description: Unauthorized
        content:
          application/json:
            schema:
              type: object
              properties:
                response:
                  type: string
            examples:
              not_logged:
                value:
                  response: "You are not logged"
      '403':
        description: Forbidden
        content:
          application/json:
            schema:
              type: object
              properties:
                response:
                  type: string
            examples:
              invalid_token:
                value:
                  response: "Invalid Token"
              expired_token:
                value:
                  response: "Expired Token"
    
 /user/transactions/{transaction_uuid}:
  get:
    summary: Display a specific made transaction 
    operationId: transaction
    tags:
      - Account
    parameters:
       - name: transaction_uuid
         in: path
         required: true
         schema:
           type: string
    responses:
      '200':
        description: Success 
        content:
            application/json:
              schema:
               type: object
               properties:
                response:
                   $ref: '#/components/schemas/Transaction'
      '400':
          description: transaction uuid is not correct
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples: 
                incorrect_uuid:
                  value:
                    response: "Missing Data"
      '401':
        description: Unauthorized
        content:
          application/json:
            schema:
              type: object
              properties:
                response:
                  type: string
            examples:
              not_logged:
                value:
                  response: "You are not logged"
      '403':
        description: Forbidden
        content:
          application/json:
            schema:
              type: object
              properties:
                response:
                  type: string
            examples:
              invalid_token:
                value:
                  response: "Invalid Token"
              expired_token:
                value:
                  response: "Expired Token"

 /collection:
   get:
     summary: View gacha system collection
     operationId: show_all
     tags:
       - Collection
     responses:
       '200':
         description: Gacha retrieved successfully
         content:
            application/json:
               schema:
                type: array
                items:
                 $ref: '#/components/schemas/Gacha'

 /collection/{gacha_uuid}:
   get:
     summary: View specific gacha information
     operationId: show
     tags:
       - Collection
     parameters:
       - name: gacha_uuid
         in: path
         required: true
         schema:
           type: string
     responses:
       '200':
         description: Gacha information retrieved successfully
         content:
           application/json:
              schema:
                $ref: '#/components/schemas/Gacha'
       '400':
          description: Gacha uuid is not correct
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                incorrect_uuid:
                  value:
                    response: "Missing Data"
 /roll:
  get:
   summary: Roll a new gacha with in game currency
   operationId: roll
   tags:
     - Collection
   responses:
     '200':
       description: Gacha rolled
       content:
            application/json:
              schema:
               type: object
               properties:
                response:
                   $ref: '#/components/schemas/Gacha'
     '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                no_currency:
                  value:
                    response: "Not enought currency"
     '401':
         description: Unauthorized
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               not_logged:
                 value:
                   response: "You are not logged"
     '403':
         description: Forbidden
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               invalid_token:
                 value:
                   response: "Invalid Token"
               expired_token:
                 value:
                   response: "Expired Token"
       
 /currency/buy:
   put:
     summary:  Purchasing in game Currency
     operationId: buy
     tags:
       - Currency
     requestBody:
      content:
           application/json:
             schema:
               type: object
               properties:
                 purchase:
                   type: number
     responses:
       '200':
         description: Purchased Successful
         content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "wallet updated Successfully!"
       '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                no_currency:
                  value:
                    response: "Invalid purchase"
       '401':
         description: Unauthorized
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               not_logged:
                 value:
                   response: "You are not logged"
       '403':
           description: Forbidden
           content:
             application/json:
               schema:
                 type: object
                 properties:
                   response:
                     type: string
               examples:
                 invalid_token:
                   value:
                     response: "Invalid Token"
                 expired_token:
                   value:
                     response: "Expired Token"
 
 /market:
   post: 
    summary: Insert a new auction
    operationId: create_auction
    tags:
      - Market
    requestBody:
      content:
           application/json:
             schema:
               type: object
               properties:
                 gacha_uuid:
                   type: string
                 starting_price:
                   type: number
    responses:
       '200':
         description: Gacha auctioned succesfully 
         content:
           application/json:
              schema:
               type: object
               properties:
                response:
                   $ref: '#/components/schemas/Gacha'
       '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                Starting price invalid:
                  value:
                    response: "Missing gacha uuid or starting price"
                Gacha uuid or not starting price:
                  value:
                    response: "Starting price must be positive"
                Gacha not owned:
                  value:
                    response: "You don't have this gacha"
                Gacha not available:
                  value:
                    response: "You have only {tot} copies of gacha {name}"
       '401':
         description: Unauthorized
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               not_logged:
                 value:
                   response: "You are not logged"
       '403':
           description: Forbidden
           content:
             application/json:
               schema:
                 type: object
                 properties:
                   response:
                     type: string
               examples:
                 invalid_token:
                   value:
                     response: "Invalid Token"
                 expired_token:
                   value:
                     response: "Expired Token"
   get:
     summary: View the all the active auction market
     operationId: show_all_auction
     tags:
       - Market
     responses:
       '200':
         description: Auctions market retrieved successfully
         content:
            application/json:
               schema:
                type: array
                items:
                 $ref: '#/components/schemas/Auction'

 /market/{auction_uuid}:
   get:
     summary: View a specific active auction market
     operationId: show_one_auction
     tags:
       - Market
     parameters:
       - name: auction_uuid
         in: path
         required: true
         schema:
           type: string
     responses:
       '200':
         description: Auction market retrieved successfully
         content:
            application/json:
               schema:
                 $ref: '#/components/schemas/Auction'
       '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                Invalid auction uuid:
                  value:
                    response: "Invalid auction uuid"

 /market/{auction_uuid}/bid:
   post:
     summary: Place a bid in an auction
     operationId: bid_auction
     tags:
       - Market
     parameters:
       - name: auction_uuid
         in: path
         required: true
         schema:
           type: string
     requestBody:
       description: Auction details for the bid
       content:
         application/json:
           schema:
             type: object
             properties:
               offer:
                 type: integer
     responses:
       '200':
         description: Bid placed successfully
         content:
           application/json:
              schema:
               type: object
               properties:
                response:
                   $ref: '#/components/schemas/Bid'
       '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                Auction expired:
                  value:
                    response: "Auction is closed"
                Owner of the auction:
                  value:
                    response: "You're the owner of this auction"
                Lower bid base price:
                  value:
                    response: "Offer must be higher than base price"
                Lower bid cur rent price:
                  value:
                    response: "Offer must be higher than current price"
                Negative bid:
                  value:
                    response: "Bid must be positive"
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"

 /market/{auction_uuid}/close:
  post:
     summary: Player can close an auction if no one is already placed a bid
     operationId: close_auction
     tags:
       - Market
     parameters:
       - name: auction_uuid
         in: path
         required: true
         schema:
           type: string
     responses:
       '200':
         description: Auction closed
         content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "Auction closed"
       '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                Auction not found:
                  value:
                    response: "Auction not found"
                Not Owner of the auction:
                  value:
                    response: "You're not the owner of this auction"
                Presence of bid:
                  value:
                    response: "Not possible to close auction with bids"
                Auction closed:
                  value:
                    response: "Auction is already closed"
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"
        
 
 /admin/login:
   post:
     summary: Login to the game system
     operationId: admin_login
     tags:
       - Admin
     requestBody:
       description: Login credentials
       content:
         application/json:
           schema:
             type: object
             properties:
               username:
                 type: string
               password:
                 type: string
     responses:
       '200':
         description: Login Successful
         content:
            application/json:
              schema:
               type: object
               properties:
                response:
                   $ref: '#/components/schemas/TokenResponse'
       '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "Missing Credentials"
       '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                already_logged_in:
                  value:
                    response: "Already logged in"
                invalid_credentials:
                  value:
                    response: "Invalid credentials"

 /admin/logout:
   delete:
     summary: Logout from the system
     operationId: admin_logout
     tags:
       - Admin
     responses:
       '200':
          description: Logout Successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "Logout Successful"
       '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                already_logged_out:
                  value:
                    response: "Already logged out"
                not_logged:
                  value:
                    response: "You are not logged"

 /admin/users:
   get:
     tags:
       - Admin
     summary: Get all users' accounts
     operationId: users_account
     responses:
       '200':
         description: List of users
         content:
           application/json:
             schema:
               type: array
               items:
                 $ref: '#/components/schemas/UserProfile'
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"

 /admin/users/{user_uuid}:
   get:
     tags:
       - Admin
     summary: Get details of a specific user
     operationId: user
     parameters:
       - name: user_uuid
         in: path
         required: true
         schema:
           type: string
     responses:
       '200':
         description: User profile details
         content:
           application/json:
             schema:
               $ref: '#/components/schemas/UserProfile'
       '400':
         description: Bad Request
         content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                User not found:
                  value:
                    response: "Auction not found"
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"
   put:
     tags:
       - Admin
     summary: Modify a specific user account
     operationId: user_modify
     parameters:
       - name: user_uuid
         in: path
         required: true
         schema:
           type: string
     requestBody:
       required: true
       content:
         application/json:
           schema:
             $ref: '#/components/schemas/UserProfile'
     responses:
       '200':
         description: User profile updated
         content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "User updated Successfully!"
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"
   delete:
     tags:
       - Admin
     summary: Modify a specific user account
     operationId: user_delete_admin
     parameters:
       - name: user_uuid
         in: path
         required: true
         schema:
           type: string
     responses:
       '200':
         description: User profile updated
         content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "User eliminated succesfully!"
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"

 /admin/transactions/{user_uuid}:
   get:
     tags:
       - Admin
     summary: Get transaction history of a specific user (incoming and outgoing)
     operationId: transaction_all_admin
     parameters:
       - name: user_uuid
         in: path
         required: true
         schema:
           type: string
     responses:
       '200':
          description: Success 
          content:
             application/json:
               schema:
                type: object
                properties:
                 response:
                   type: array
                   items:
                    $ref: '#/components/schemas/Transaction'
       '401':
         description: Unauthorized
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               not_logged:
                 value:
                   response: "You are not logged"
       '403':
         description: Forbidden
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               invalid_token:
                 value:
                   response: "Invalid Token"
               expired_token:
                 value:
                   response: "Expired Token"

 /admin/collection:
   post:
     tags:
       - Admin
     summary: Add a new gacha to the collection
     operationId: add_gacha
     requestBody:
       required: true
       content:
         application/json:
           schema:
             $ref: '#/components/schemas/Gacha'
     responses:
       '200':
         description: Gacha added 
         content:
           application/json:
             schema:
               $ref: '#/components/schemas/Gacha'
       '400':
         description: Bad Request
         content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                Image not found:
                  value:
                    response: "gacha image not found"
                Filename not found:
                  value:
                    response: "filename not found"
                invalid image:
                  value:
                    response: "invalid image"
                name, description or rarity missing:
                  value:
                    response: "Missing data"
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"

 /admin/collection/{gacha_uuid}:
   put:
     tags:
       - Admin
     summary: modify a gacha from the collection
     operationId: modify_gacha
     parameters:
       - name: gacha_uuid
         in: path
         required: true
         schema:
           type: string
     requestBody:
       required: true
       content:
         application/json:
           schema:
             $ref: '#/components/schemas/Gacha'
     responses:
       '200':
         description: Gacha modified 
         content:
           application/json:
             schema:
               $ref: '#/components/schemas/Gacha'
       '400':
         description: Bad Request
         content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                Filename not found:
                  value:
                    response: "filename not found"
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"
   delete:
     tags:
       - Admin
     summary: Delete a gacha from the collection
     operationId: delete_gacha
     parameters:
       - name: gacha_uuid
         in: path
         required: true
         schema:
           type: string
     responses:
       '200':
         description: Gacha deleted
         content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "Gacha deleted"
       '400':
         description: Bad Request
         content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                gacha not found:
                  value:
                    response: "gacha uuid not found"
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"
 /admin/market:
  get:
     summary: View the all the active and close auctions
     operationId: show_all_auction_admin
     tags:
       - Admin
     responses:
       '200':
         description: Auctions market retrieved successfully
         content:
            application/json:
               schema:
                type: array
                items:
                 $ref: '#/components/schemas/Auction'
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"

 /admin/market/{auction_uuid}:
  get:
     tags:
       - Admin
     summary: Get an open or closed specific auction
     parameters:
       - name: auction_uuid
         in: path
         required: true
         schema:
           type: string
     responses:
       '200':
         description: auction
         content:
           application/json:
             schema:
                 $ref: '#/components/schemas/Auction'
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"

 /admin/{auction_uuid}/close:
  put:
     summary: Admin can close an auction 
     operationId: close_auction_admin
     tags:
       - Admin
     parameters:
       - name: auction_uuid
         in: path
         required: true
         schema:
           type: string
     responses:
       '200':
         description: Auction closed
         content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              example:
                response: "Auction closed"
       '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  response:
                    type: string
              examples:
                Auction not found:
                  value:
                    response: "Auction not found"
                Auction closed:
                  value:
                    response: "Auction is already closed"
       '401':
            description: Unauthorized
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Not logged:
                    value:
                      response: "You are not logged"
       '403':
             description: Forbidden
             content:
               application/json:
                 schema:
                   type: object
                   properties:
                     response:
                       type: string
                 examples:
                   Invalid token:
                     value:
                       response: "Invalid Token"
                   Expired token:
                     value:
                       response: "Expired Token"

 /admin/payment/{auction_uuid}:
   post:
    summary: Admin can force a payment for an auction 
    operationId: payment_auction_admin
    tags:
      - Admin
    parameters:
      - name: auction_uuid
        in: path
        required: true
        schema:
          type: string
    responses:
      '200':
        description: Auction payed
        content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: object
      '400':
         description: Bad Request
         content:
           application/json:
             schema:
               type: object
               properties:
                 response:
                   type: string
             examples:
               Auction not found:
                 value:
                   response: "Auction not found"
               Auction closed:
                 value:
                   response: "Auction is already closed"
               No buyers with money:
                 value:
                   response: "No buyers with sufficient funds"
               No bids: 
                 value:
                   response: "There are no bids for this auction"
      '401':
           description: Unauthorized
           content:
             application/json:
               schema:
                 type: object
                 properties:
                   response:
                     type: string
               examples:
                 Not logged:
                   value:
                     response: "You are not logged"
      '403':
            description: Forbidden
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    response:
                      type: string
                examples:
                  Invalid token:
                    value:
                      response: "Invalid Token"
                  Expired token:
                    value:
                      response: "Expired Token"
                  Cannot be call:
                    value:
                      response: "You're not authorized"
                

components:
 schemas:
   UserProfile:
     type: object
     description: Player of the game
     properties:
       user_uuid:
         type: string
         description: Unique identifier of the User
       username:
         type: string
         description: Unique nickname of the User
       wallet:
         type: number
         description: In game currency of the User (default 0) 
   Transaction:
     type: object
     description: A report about the trades for gachas
     properties:
       transaction_uuid:
         type: string
         description: Unique identifier of the transaction
       price:
         type: number
         description: Amount of currency payd for the transaction
       created_at:
         type: string
         description: Date/Time of the creation of the transaction
       uuid_player:
         type: string
         description: Identifier of the player that won the auction
       uuid_auction:
         type: string
         description: Identifier of the auction associated to that transaction
   Gacha:
     type: object
     description: Collectionables of the game
     properties:
       gacha_uuid:
         type: string
         description: Unique identifier of the gacha
       name:
         type: string
         description: Common name of the gacha
       rarity:
         type: string
         description: Rarity of the gacha
       descriptions:
         type: string
         description: Description of the gacha
       image_path:
         type: string
         description: Path of the gacha image
   Auction:
     type: object
     description: A method to exchange gacha in game
     properties:
       auction_uuid:
        type: string
        description: Unique identifier of the auction
       base_price:
        type: number
        description: Starting price of the auction
       gacha_uuid:
        type: string
        description: Identifier of the Gacha subject of the auction
       user_uuid:
        type: string
        description: Identifier of the player that created the auction
       expired_at:
        type: string
        description: Expiration of the auction in Date/Time format
       closed:
        type: string
        description: Status of the auction
   TokenResponse:
       type: object
       description: Oauth2 response token endpoint
       properties:
         access_token:
           type: string
           description: The JWT access token
         expires_in:
           type: integer
           description: The token's expiration time in seconds
         id_token:
           type: string
           description: The JWT ID token
         token_type:
           type: string
           description: The type of token, typically "Bearer"
   Rarity:
      type: object
      description: Rarity of the gacha
      properties:
        uuid:
         type: string
         description: Unique identifier of the rarity
        name:
         type: string
         description: Common name of the rarity
        symbol:
         type: string
         description: Symbol of the rarity
        percentage:
         type: string
         description: Percentual applied by the roll to that rarity
   Bid:
      type: object
      description: Response of a bid
      properties:
        auction__uuid:
         type: string
         description: Identifier of the auction bidded
        closed:
         type: string
         description: Status of the auction bidded
        offer:
         type: string
         description: Current offer of the auction (current bid made)
        player_uuid:
         type: string
         description: Identifier of the player who made the bid
 